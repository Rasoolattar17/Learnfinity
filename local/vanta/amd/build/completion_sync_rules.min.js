define("local_vanta/training_sync_rules",["jquery","core/str","core/ajax","core/notification","core/templates","core/st_loader","core/url","select2-js"],(function($,str,ajax,notification,templates,stLoader){var completionSyncRules={dom:{main:null,frameworksSelect:null,coursesSelect:null,completionModeContainer:null,completionModeSelect:null,saveButton:null,form:null},lang:{somethingWentWrong:null,saveSuccess:null},variables:{selectedFrameworks:[],selectedCourses:[]},action:{getStringValues:function(){str.get_strings([{key:"some_thing_went_wrong",component:"local_vanta"},{key:"settingssaved",component:"local_vanta"}]).done((function(langstrs){completionSyncRules.lang.somethingWentWrong=langstrs[0],completionSyncRules.lang.saveSuccess=langstrs[1],completionSyncRules.init()})).fail((function(){notification.addNotification({type:"error",message:"Failed to load language strings"})}))},setupEventListeners:function(){completionSyncRules.dom.frameworksSelect.select2({placeholder:"Select compliance frameworks",allowClear:!0,width:"100%"}),completionSyncRules.dom.coursesSelect.select2({placeholder:"Select courses",allowClear:!0,width:"100%"}),completionSyncRules.dom.coursesSelect.on("change",(function(){var selectedCourses=$(this).val();completionSyncRules.variables.selectedCourses=selectedCourses,selectedCourses&&selectedCourses.length>1?completionSyncRules.dom.completionModeContainer.show():completionSyncRules.dom.completionModeContainer.hide()})),completionSyncRules.dom.frameworksSelect.on("change",(function(){completionSyncRules.variables.selectedFrameworks=$(this).val()})),completionSyncRules.dom.form.on("submit",(function(e){e.preventDefault(),completionSyncRules.action.saveSettings()}))},saveSettings:function(){stLoader.showLoader();var formData={frameworks:completionSyncRules.variables.selectedFrameworks,courses:completionSyncRules.variables.selectedCourses,completionmode:completionSyncRules.dom.completionModeSelect.val(),resourceid:completionSyncRules.dom.resourceId.val(),sesskey:$('input[name="sesskey"]').val()};ajax.call([{methodname:"local_vanta_save_sync_rules",args:formData}])[0].done((function(response){stLoader.hideLoader(),response.success?notification.addNotification({type:"success",message:completionSyncRules.lang.saveSuccess}):notification.addNotification({type:"error",message:response.message||completionSyncRules.lang.somethingWentWrong})})).fail((function(error){stLoader.hideLoader(),notification.addNotification({type:"error",message:completionSyncRules.lang.somethingWentWrong}),console.error(error)}))},initializeState:function(){completionSyncRules.dom.coursesSelect.trigger("change")}},init:function(){completionSyncRules.dom.main=$("#local_vanta_training_sync_rules"),completionSyncRules.dom.form=$("#vanta-sync-rules-form"),completionSyncRules.dom.frameworksSelect=$("#frameworks"),completionSyncRules.dom.coursesSelect=$("#courses"),completionSyncRules.dom.resourceId=$(".resource_id"),completionSyncRules.dom.completionModeContainer=$("#completion_mode_container"),completionSyncRules.dom.completionModeSelect=$("#completion_mode"),completionSyncRules.dom.saveButton=$("#save_sync_rules"),completionSyncRules.variables.selectedFrameworks=completionSyncRules.dom.frameworksSelect.val()||[],completionSyncRules.variables.selectedCourses=completionSyncRules.dom.coursesSelect.val()||[],completionSyncRules.action.setupEventListeners(),completionSyncRules.action.initializeState()}};return{init:completionSyncRules.action.getStringValues}}));

//# sourceMappingURL=training_sync_rules.min.js.map