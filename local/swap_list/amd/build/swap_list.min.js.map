{"version":3,"file":"swap_list.min.js","sources":["../src/swap_list.js"],"sourcesContent":["/* eslint-disable promise/always-return */\ndefine(['jquery', 'core/notification', 'core/templates', 'core/st_loader'],\nfunction($, notification, templates, stLoader) {\n    var renderBlocks = function(div, left, right) {\n        var variables = {\n            main: null,\n            left: {\n                'main-class': 'left-swap-main',\n                'select-all-id': 'left-select-all',\n                'list-class': 'left-swap-list',\n                'search-class': 'left-swap-search'\n            },\n            right: {\n                'main-class': 'right-swap-main',\n                'select-all-id': 'right-select-all',\n                'list-class': 'right-swap-list',\n                'search-class': 'right-swap-search'\n            },\n            swapListListItem: null,\n            moveLeftBtn: null,\n            moveRightBtn: null,\n            leftSelectAll: null,\n            rightSelectAll: null,\n            leftSwapSearch: null,\n            rightSwapSearch: null,\n            selectedCount: 0\n        };\n\n        left = $.extend({}, variables.left, left);\n        right = $.extend({}, variables.right, right);\n\n        var hash = {\n            left,\n            right\n        };\n\n        templates.render('local_swap_list/blocks', hash).then(function(html) {\n            div.html(html);\n            variables.main = $(document).find('#local_swap_list');\n            variables.swapListListItem = variables.main.find('.swap-list-list-item');\n            variables.moveLeftBtn = variables.main.find('.move-left-btn');\n            variables.moveRightBtn = variables.main.find('.move-right-btn');\n            variables.leftSelectAll = variables.main.find('#left-select-all');\n            variables.rightSelectAll = variables.main.find('#right-select-all');\n            variables.leftSwapSearch = variables.main.find('.left-swap-search');\n            variables.rightSwapSearch = variables.main.find('.right-swap-search');\n\n\n            variables.swapListListItem.click(function(e) {\n                var li = $(e.currentTarget);\n                var countSpan = li.parent().parent().parent().parent().find('.selected-count');\n                variables.selectedCount = parseInt(countSpan.html(), 10);\n\n                if (li.hasClass('selected')) {\n                    li.removeClass('selected');\n                    if (variables.selectedCount != 0) {\n                        variables.selectedCount--;\n                    }\n                } else {\n                    li.addClass('selected');\n                    variables.selectedCount++;\n                }\n\n                if (li.find('.list-item-check').hasClass('d-none')) {\n                    li.find('.list-item-check').removeClass('d-none');\n                } else {\n                    li.find('.list-item-check').addClass('d-none');\n                }\n\n                li.parent().parent().parent().parent().find('.selected-count').html(variables.selectedCount);\n            });\n\n            variables.moveLeftBtn.click(function() {\n                if (variables.selectedCount) {\n                    stLoader.showLoader();\n                    variables.main.find('.right-swap-list > .swap-list-list-item.selected').each(function(index, item) {\n                        item = $(item);\n                        variables.main.find('.left-swap-list').prepend(item);\n                        if (item.hasClass('swapped')) {\n                            item.removeClass('swapped');\n                        } else {\n                            item.addClass('swapped');\n                        }\n\n                        if (item.hasClass('selected')) {\n                            item.removeClass('selected');\n                        } else {\n                            item.addClass('selected');\n                        }\n\n                        $('#right-select-all').next().html(0);\n                        item.find('.list-item-check').addClass('d-none');\n\n                        variables.selectedCount = 0;\n                        stLoader.hideLoader();\n\n                    });\n                } else {\n                    notification.addNotification({\n                        type: 'error',\n                        message: 'Select at least one from the list.'\n                    });\n                }\n            });\n\n            variables.moveRightBtn.click(function() {\n                if (variables.selectedCount) {\n                    stLoader.showLoader();\n                    variables.main.find('.left-swap-list > .swap-list-list-item.selected').each(function(index, item) {\n                        item = $(item);\n                        variables.main.find('.right-swap-list').prepend(item);\n                        if (item.hasClass('swapped')) {\n                            item.removeClass('swapped');\n                        } else {\n                            item.addClass('swapped');\n                        }\n\n                        if (item.hasClass('selected')) {\n                            item.removeClass('selected');\n                        } else {\n                            item.addClass('selected');\n                        }\n\n                        $('#left-select-all').next().html(0);\n\n                        item.find('.list-item-check').addClass('d-none');\n\n                        variables.selectedCount = 0;\n                        stLoader.hideLoader();\n                    });\n                } else {\n                    notification.addNotification({\n                        type: 'error',\n                        message: 'Select at least one from the list.'\n                    });\n                }\n\n            });\n\n            variables.leftSelectAll.click(function(e) {\n                var checkbox = $(e.currentTarget);\n                var selected = checkbox[0].checked;\n                variables.selectedCount = 0;\n\n                variables.main.find('.left-swap-list > .swap-list-list-item').each(function(index, item) {\n                    item = $(item);\n\n                    if (!selected) {\n                        item.removeClass('selected');\n                        if (variables.selectedCount != 0) {\n                            variables.selectedCount--;\n                        }\n                        item.find('.list-item-check').addClass('d-none');\n                    } else {\n                        if (!item.hasClass('disabled')) {\n                            item.addClass('selected');\n                            item.find('.list-item-check').removeClass('d-none');\n                            variables.selectedCount++;\n                        }\n                    }\n                });\n\n                checkbox.parent().find('.selected-count').html(variables.selectedCount);\n            });\n\n            variables.rightSelectAll.click(function(e) {\n                var checkbox = $(e.currentTarget);\n                var selected = checkbox[0].checked;\n                variables.selectedCount = 0;\n\n                variables.main.find('.right-swap-list > .swap-list-list-item').each(function(index, item) {\n                    item = $(item);\n\n                    if (!selected) {\n                        item.removeClass('selected');\n                        if (variables.selectedCount != 0) {\n                            variables.selectedCount--;\n                        }\n                        item.find('.list-item-check').addClass('d-none');\n                    } else {\n                        item.addClass('selected');\n                        variables.selectedCount++;\n                        item.find('.list-item-check').removeClass('d-none');\n                    }\n                });\n\n                checkbox.parent().find('.selected-count').html(variables.selectedCount);\n            });\n\n\n            variables.leftSwapSearch.keyup(function() {\n                var search = variables.leftSwapSearch.val().toLowerCase();\n                variables.main.find('.left-swap-list > .swap-list-list-item').each(function(index, item) {\n                    item = $(item);\n                    if (item.html().toLowerCase().includes(search)) {\n                        item.removeClass('d-none');\n                    } else {\n                        item.addClass('d-none');\n                    }\n                });\n            });\n\n            $('.loader').addClass('d-none');\n\n            variables.rightSwapSearch.keyup(function() {\n                var search = variables.rightSwapSearch.val().toLowerCase();\n                variables.main.find('.right-swap-list > .swap-list-list-item').each(function(index, item) {\n                    item = $(item);\n                    if (item.html().toLowerCase().includes(search)) {\n                        item.removeClass('d-none');\n                    } else {\n                        item.addClass('d-none');\n                    }\n                });\n            });\n\n        }).fail(function() {\n            notification.addNotification({\n                type: 'error',\n                message: 'Something went wrong..'\n            });\n        });\n    };\n\n    return {\n        renderBlocks: renderBlocks\n    };\n});\n"],"names":["define","$","notification","templates","stLoader","renderBlocks","div","left","right","variables","main","swapListListItem","moveLeftBtn","moveRightBtn","leftSelectAll","rightSelectAll","leftSwapSearch","rightSwapSearch","selectedCount","hash","extend","render","then","html","document","find","click","e","li","currentTarget","countSpan","parent","parseInt","hasClass","removeClass","addClass","showLoader","each","index","item","prepend","next","hideLoader","addNotification","type","message","checkbox","selected","checked","keyup","search","val","toLowerCase","includes","fail"],"mappings":"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"}